<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Overlay Configuration</title>
  <link rel="stylesheet" href="/css/config-panel.css">
</head>
<body>
  <!-- Loading Screen -->
  <div id="loadingScreen">
    <div class="spinner"></div>
    <div class="loading-text">Verifying admin access...</div>
  </div>
  
  <!-- Access Denied Screen -->
  <div id="accessDenied">
    <h2>üîí Access Denied</h2>
    <p>Only admins can access overlay configuration.</p>
    <a href="/dashboard.html" class="btn-home">‚Üê Back to Dashboard</a>
  </div>
  
  <!-- Configuration Panel -->
  <div id="configPanel">
    <!-- Header -->
    <div class="config-header">
      <div class="header-left">
        <a href="/dashboard.html" class="back-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Dashboard
        </a>
        <h1>‚öôÔ∏è Overlay Configuration</h1>
      </div>
      <div class="admin-badge">
        <img id="adminAvatar" class="admin-avatar" src="" alt="Avatar">
        <div class="admin-info">
          <div class="admin-name" id="adminName"></div>
          <div class="admin-role">Administrator</div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="config-content">
      <!-- Counter Settings -->
      <div class="config-card">
        <div class="card-header">
          <h2>üìä Counter Settings</h2>
          <label class="toggle">
            <input type="checkbox" id="countersEnabled" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <div class="config-section" id="counterSettings">
          <div class="form-group">
            <label>Position</label>
            <div class="position-grid">
              <button class="position-btn" data-pos="top-left">‚Üñ Top Left</button>
              <button class="position-btn" data-pos="top-center">‚Üë Top Center</button>
              <button class="position-btn" data-pos="top-right">‚Üó Top Right</button>
              <button class="position-btn active" data-pos="bottom-left">‚Üô Bottom Left</button>
              <button class="position-btn" data-pos="bottom-center">‚Üì Bottom Center</button>
              <button class="position-btn" data-pos="bottom-right">‚Üò Bottom Right</button>
            </div>
          </div>

          <div class="form-group">
            <label>Layout</label>
            <select id="counterLayout" class="form-select">
              <option value="horizontal">Horizontal</option>
              <option value="vertical">Vertical</option>
              <option value="grid">Grid (2x2)</option>
            </select>
          </div>

          <div class="form-group">
            <label>Size</label>
            <div class="size-options">
              <button class="size-btn" data-size="small">Small</button>
              <button class="size-btn active" data-size="medium">Medium</button>
              <button class="size-btn" data-size="large">Large</button>
            </div>
          </div>

          <div class="form-group">
            <label>Counter Colors & Preview</label>
            <div class="color-configurator">
              
              <!-- Kills Counter -->
              <div class="counter-config-item">
                <div class="counter-preview kills-preview">
                  <div class="preview-icon">üíÄ</div>
                  <div class="preview-info">
                    <input type="text" class="preview-label-input" id="killsLabel" value="Kills" maxlength="20" placeholder="Counter Label">
                    <div class="preview-value">0</div>
                  </div>
                </div>
                <div class="color-controls">
                  <label>Border & Text Color</label>
                  <div class="color-picker-group">
                    <input type="color" id="killsColor" value="#4CAF50">
                    <input type="text" class="color-hex" id="killsColorHex" value="#4CAF50" maxlength="7">
                    <button class="color-preset-btn" data-color="#4CAF50">Reset</button>
                  </div>
                  <div class="color-presets">
                    <button class="preset-swatch" data-target="kills" data-color="#4CAF50" style="background: #4CAF50" title="Green"></button>
                    <button class="preset-swatch" data-target="kills" data-color="#00E676" style="background: #00E676" title="Bright Green"></button>
                    <button class="preset-swatch" data-target="kills" data-color="#76FF03" style="background: #76FF03" title="Lime"></button>
                    <button class="preset-swatch" data-target="kills" data-color="#00BCD4" style="background: #00BCD4" title="Cyan"></button>
                    <button class="preset-swatch" data-target="kills" data-color="#2196F3" style="background: #2196F3" title="Blue"></button>
                  </div>
                </div>
              </div>

              <!-- Extracted Counter -->
              <div class="counter-config-item">
                <div class="counter-preview extracted-preview">
                  <div class="preview-icon">‚úÖ</div>
                  <div class="preview-info">
                    <input type="text" class="preview-label-input" id="extractedLabel" value="Extracted" maxlength="20" placeholder="Counter Label">
                    <div class="preview-value">0</div>
                  </div>
                </div>
                <div class="color-controls">
                  <label>Border & Text Color</label>
                  <div class="color-picker-group">
                    <input type="color" id="extractedColor" value="#FFC107">
                    <input type="text" class="color-hex" id="extractedColorHex" value="#FFC107" maxlength="7">
                    <button class="color-preset-btn" data-color="#FFC107">Reset</button>
                  </div>
                  <div class="color-presets">
                    <button class="preset-swatch" data-target="extracted" data-color="#FFC107" style="background: #FFC107" title="Amber"></button>
                    <button class="preset-swatch" data-target="extracted" data-color="#FFEB3B" style="background: #FFEB3B" title="Yellow"></button>
                    <button class="preset-swatch" data-target="extracted" data-color="#FF9800" style="background: #FF9800" title="Orange"></button>
                    <button class="preset-swatch" data-target="extracted" data-color="#FFD700" style="background: #FFD700" title="Gold"></button>
                    <button class="preset-swatch" data-target="extracted" data-color="#FFA726" style="background: #FFA726" title="Light Orange"></button>
                  </div>
                </div>
              </div>

              <!-- KIA Counter -->
              <div class="counter-config-item">
                <div class="counter-preview kia-preview">
                  <div class="preview-icon">‚ò†Ô∏è</div>
                  <div class="preview-info">
                    <input type="text" class="preview-label-input" id="kiaLabel" value="KIA" maxlength="20" placeholder="Counter Label">
                    <div class="preview-value">0</div>
                  </div>
                </div>
                <div class="color-controls">
                  <label>Border & Text Color</label>
                  <div class="color-picker-group">
                    <input type="color" id="kiaColor" value="#F44336">
                    <input type="text" class="color-hex" id="kiaColorHex" value="#F44336" maxlength="7">
                    <button class="color-preset-btn" data-color="#F44336">Reset</button>
                  </div>
                  <div class="color-presets">
                    <button class="preset-swatch" data-target="kia" data-color="#F44336" style="background: #F44336" title="Red"></button>
                    <button class="preset-swatch" data-target="kia" data-color="#E91E63" style="background: #E91E63" title="Pink"></button>
                    <button class="preset-swatch" data-target="kia" data-color="#FF5252" style="background: #FF5252" title="Bright Red"></button>
                    <button class="preset-swatch" data-target="kia" data-color="#D32F2F" style="background: #D32F2F" title="Dark Red"></button>
                    <button class="preset-swatch" data-target="kia" data-color="#FF1744" style="background: #FF1744" title="Crimson"></button>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>

      <!-- Message Settings -->
      <div class="config-card">
        <div class="card-header">
          <h2>üì¢ Message Settings</h2>
          <label class="toggle">
            <input type="checkbox" id="messageEnabled" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <div class="config-section" id="messageSettings">
          <div class="form-group">
            <label>Position</label>
            <select id="messagePosition" class="form-select">
              <option value="top">Top</option>
              <option value="bottom" selected>Bottom</option>
            </select>
          </div>

          <div class="form-group">
            <label>Font Size: <span id="fontSizeValue">32px</span></label>
            <input type="range" id="messageFontSize" min="20" max="60" value="32" class="slider">
          </div>

          <div class="form-group">
            <label>Text Color</label>
            <input type="color" id="messageColor" value="#FFC107" class="color-picker">
          </div>

          <div class="form-group">
            <label>Scroll Speed: <span id="scrollSpeedValue">15px/s</span></label>
            <input type="range" id="scrollSpeed" min="5" max="30" value="15" class="slider">
          </div>
        </div>
      </div>

      <!-- Celebration Settings -->
      <div class="config-card">
        <div class="card-header">
          <h2>üéâ Celebration Settings</h2>
          <label class="toggle">
            <input type="checkbox" id="celebrationEnabled" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <div class="config-section" id="celebrationSettings">
          <div class="form-group">
            <label>Duration: <span id="durationValue">5s</span></label>
            <input type="range" id="celebrationDuration" min="3" max="10" value="5" class="slider">
          </div>

          <div class="form-group">
            <label>Text Size: <span id="textSizeValue">120px</span></label>
            <input type="range" id="celebrationTextSize" min="80" max="180" value="120" class="slider">
          </div>

          <div class="form-group">
            <label>Effect Intensity</label>
            <select id="effectIntensity" class="form-select">
              <option value="low">Low</option>
              <option value="normal" selected>Normal</option>
              <option value="high">High</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="config-actions">
        <button class="btn btn-secondary" onclick="resetConfig()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
            <path d="M21 3v5h-5"/>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
            <path d="M3 21v-5h5"/>
          </svg>
          Reset to Defaults
        </button>
        <button class="btn btn-primary" onclick="saveConfig()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
            <polyline points="17 21 17 13 7 13 7 21"/>
            <polyline points="7 3 7 8 15 8"/>
          </svg>
          Save Configuration
        </button>
      </div>

      <!-- Preview Panel -->
      <div class="config-card">
        <div class="card-header">
          <h2>üëÅÔ∏è Live Preview</h2>
        </div>
        <div class="preview-info">
          <p>Changes will be applied in real-time to the OBS overlay.</p>
          <p>OBS Browser Source URL:</p>
          <code id="overlayUrl">Loading...</code>
          <button class="btn-copy" onclick="copyUrl()">Copy URL</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
  <script src="/js/config-panel.js"></script>
</body>
</html>